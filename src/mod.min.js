(function(ba){function G(a){for(var b=arguments.length,d=1;d<b;d++){var e=arguments[d];if((h(a)||k(a))&&h(e))for(var c in e)l(e,c)&&(a[c]=e[c]);else void 0!==e&&(a=e)}return a}function H(a){var b=arguments.length;h(a)||k(a)||(a={});for(var d=1;d<b;d++){var e=arguments[d],c;if(h(e))for(var f in e)if(l(e,f)){c=a[f];var g=e[f];h(g)?(c=h(c)?c:Array.isArray(g)?Array.isArray(c)?c:[]:{},a[f]=H(c,g)):a[f]=g}}return a}function I(a,b){return a instanceof Array?a.slice():b&&a instanceof HTMLElement?a.cloneNode(!0):
h(a)?H({},a):a}function h(a){var b,d;if(!a||"[object Object]"!=a+""||!l(a,"constructor")&&(b=a.constructor,k(b)&&!(b instanceof b))||"object"!==typeof a)return!1;for(var e in a)d=e;return"undefined"==typeof d||l(a,d)}function k(a){return!(!a||!a.apply)}function t(a){return"string"===typeof a}function l(a,b){return a?a[b]?!0:b in a:!1}function ca(a){a=M(a);return y[a]}function M(a){l(a,v)||N(a,O++);return a[v]}function N(a,b){y[b]||(y[b]={});z(a,v,{value:b,writable:!1,configurable:!1,enumerable:!1});
z(a,da,{value:y[b],writable:!1,configurable:!1,enumerable:!1})}function A(a,b){for(var d=(","+a).match(ea)||[""],e=0;e<d.length;e++){var c=d[e].trim();","===c[0]&&(c=c.slice(1));c=c.trim();b(c,e)}}function B(a,b,d){A(b,function(b){var c=P(a,b),f=d;if(l(c.src,"addEventListener"))if(c.modifiers.forEach(function(a){/^onc?e/.test(a)?f=w.one(c.evt,f):/^delegate/.test(a)?(a=a.match(C)[1],f=w.delegate(c.evt,f,a)):/^pass/.test(a)?(a=a.match(C)[1].split(fa).map(Q),f=w.pass(c.evt,f,a)):/^throttle/.test(a)?
(a=parseFloat(a.match(C)[1]),f=w.throttle(c.evt,f,a)):/^defer/.test(a)?(a=parseFloat(a.match(C)[1]),f=w.defer(c.evt,f,a)):c.evt+=":"+a}),m)m(c.src).on(c.evt,f);else c.src.addEventListener(c.evt,f)});return d}function D(a,b,d){A(b,function(b){b=P(a,b);d&&(m?m(b.src).off(b.evt,d):b.src.removeEventListener(b.evt,d))});return d}function P(a,b){var d=b.match(/\w+(?:\:\w+(?:\(.+\))?)*$/)[0],e={};b=b.slice(0,-d.length).trim();e.src=ga(a,b);d=ha(d,"on").split(":");e.evt=d[0];e.modifiers=d.slice(1).sort(function(a,
b){return/onc?e/.test(a)?1:-1});return e}function ga(a,b){return b?/^document/i.test(b)?p:/^body/i.test(b)?ia:/^window/i.test(b)?x:/^root/i.test(b)?J:/parent/i.test(b)||".."===b?a.parentNode:"@"===b[0]?b:/^[.#[]/.test(b)?p.querySelector(b):a:a}function ja(){}function E(a,b,d,e){if(m){var c=m.Event(b,d);c.detail=d;e?m(a).trigger(c):m(a).triggerHandler(c)}else b instanceof Event?c=b:(c=p.createEvent("CustomEvent"),c.initCustomEvent(b,e,null,d)),a.dispatchEvent&&a.dispatchEvent(c)}function K(a){var b;
if(/true/i.test(a))return!0;if(/false/i.test(a))return!1;if(!/[^\d\.\-]/.test(a)&&!isNaN(b=parseFloat(a)))return b;if(/\{/.test(a))try{return JSON.parse(a)}catch(d){}return a}function ka(a){if(!t(a))return[K(a)];a=a.trim();"["===a[0]&&(a=a.slice(1));1<a.length&&"]"===a[a.length-1]&&(a=a.slice(0,-1));var b=[];A(a,function(a){b.push(K(a))});return b}function la(a){return a&&a.replace(/[A-Z]/g,function(a,d){return(d?"-":"")+a.toLowerCase()})}function Q(a){return a.toUpperCase()}function ha(a,b){return a.slice(0,
b.length)===b?a.slice(b.length).toLowerCase():a}function ma(a){if(!a)return""+a;if(a instanceof Array)return a.join(",");if(a instanceof HTMLElement)return a.id;if(h(a))return JSON.stringify(a);if(k(a)){var b=a.toString();a.slice(b.indexOf("{")+1,b.lastIndexOf("}"))}else return a.toString()}function u(a,b,d,e){var c=a._;if(c[b])return c[b];c[b]=this;c=d[b];if(h(c))for(var f in c)if(!L[f]){var g=c[f];s(g)&&g.eachProp(function(b,c){l(d,b)||new u(a,b,d)})}b[0]===na&&(this.isRefPointer=!0,this.refProp=
b.split(/\s/)[0].slice(1),this.refEvt=b.slice(this.refProp.length+1).trim(),f=new u(a,this.refProp,d),f.isRefTarget=!0,f.refPointer=b);this.displayName=b;this.target=a;this.initialMod=d;this.optValue=e;this.init=h(d[b])?d[b].init:d[b];this.callValueReference=this.callValueReference.bind(this);l(a,b)?this.isNative=!0:z(a,b,{configurable:!1,enumerable:!0,get:this.getValue.bind(this),set:this.setValue.bind(this)});return this}function n(a,b,d){return n.create.call(this,a,b,d)}function oa(a,b){for(var d=
this,e,c=Object.keys(d).filter(function(a){return!b&&("_"===a[0]&&1<a.length||R[a]||S[a])||pa[a]?!1:!0}).sort(function(a,b){return h(d[a])||t(d[a])?1:-1}),f=0;f<c.length&&(e=a(c[f],d[c[f]]),!1!==e);f++);}function qa(a){var b=this.toJSON();s(a)&&(a=a.toJSON());a=a||{};for(var d in b)a[d]=ra(a[d],b[d]);return n(a)}function ra(a,b){if(void 0===b)return a;if(void 0===a)return b;if(h(a))return h(b)?H(b,a):G({init:b},a);h(b);return a}function sa(a,b){if(void 0===a)a=n.createDefaultTarget();else{if(null===
a||0===a.length&&void 0===a.nodeType)return{};!b&&h(a)&&(b=a,a=n.createDefaultTarget())}if(a.length&&void 0===a.nodeType){for(var d=a.length,e=0;e<d;e++)T(a[e],this,b);return a}return T(a,this,b)}function T(a,b,d){var e,c;l(a,v);e=M(a);if(b.instances&&b.instances[e])return a;c=U(a,b);var f=k(b.init)?b.init.call(a,d):h(b.init)?I(b.init):b.init instanceof HTMLElement?b.init.cloneNode(!0):b.init;void 0!==f&&(N(f,e),a=f,G(c,U(a,b)));d=G(c,d);for(var g in d)c=d[g],k(c)?(B(a,g,c.bind(a)),delete d[g]):l(b,
g)||(a[g]=c);E(a,"init");b.instances&&(b.instances[e]=a);b.displayName&&a instanceof HTMLElement&&a.classList.add(b.displayName);void 0===a.isAttached&&a instanceof HTMLElement&&(a.isAttached=!1);a.toJSON||(a.toJSON=ta);b.eachProp(function(c,e){S[c]||R[c]||("_"===c[0]&&1<c.length?z(a,c,{value:I(e),writable:!0,enumerable:!1,configurable:!1}):d?new u(a,c,b,d[c]):new u(a,c,b))},!0);V(a,b);b.created&&b.created.call(a);E(a,"created");J.contains(a)&&F(a);return a}function V(a,b){b&&b.eachProp(function(d){a._[d].setMod(b)})}
function ua(a,b){b&&b.eachProp(function(b){a._[b].setMod(a._[b].initialMod)})}function U(a,b){var d={},e=l(a,"cloneNode")?a.cloneNode():a;b.eachProp(function(b,f){var g=la(b);if(l(a,b))!/^on/.test(b)&&b in e||(d[b]=a[b]);else{var q=h(f)?k(f.init)?"":f.init:f;if(l(a,"attributes")&&(g=a.attributes[b]||a.attributes["data-"+b]||a.attributes[g]||a.attributes["data-"+g]))if(/^on/.test(b))d[b]=new Function(g.value);else{var g=g.value,r;if(q instanceof Array)r=ka(g);else if("number"===typeof q)r=parseFloat(g);
else if("boolean"===typeof q)r=!/^(false|off|0)$/.test(g);else if(k(q))r=new Function(g);else if(t(q))r=g;else if(h(q)){q=g;"{"!==q[0]&&(q="{"+q+"}");try{r=JSON.parse(q)}catch(m){r={}}}else r=K(g);d[b]=r}}});return d}function W(a){for(var b in a)if(/,/.test(b)){var d=a[b];delete a[b];A(b,function(b){a[b]=d})}return a}function s(a){return k(a)&&!!a.eachProp}function va(){var a={},b;this.eachProp(function(d,e){if(h(e)){b={};for(var c in e)s(e[c])?b[c]=e[c].toJSON():b[c]=e[c];a[d]=b}else a[d]=e},!0);
return a}function ta(){var a=this._,b={},d;for(d in a){var e=a[d];k(e.value)||(b[d]=e.value)}return b}function F(a){a.isAttached||(a.isAttached=!0,E(a,"attached"))}var x=window,p=document,J=p.documentElement,ia=document.body;(0,eval)("this");var wa=p&&p.querySelector("head"),X=function(){var a;if(x.getComputedStyle){var b=x.getComputedStyle(J,"");a=(Array.prototype.slice.call(b).join("").match(/-(moz|webkit|ms)-/)||""===b.OLink&&["","o"])[1]}else a="ms";var b="ms"==a?"MS":a,d="-"+a+"-",e=a;"ms"!=
a&&(a=(a+="")?Q(a[0])+a.slice(1):a);return{dom:b,css:d,lowercase:e,js:a}}(),Y=x.MutationObserver||x[X.js+"MutationObserver"],Z=Element.prototype.matchesSelector||Element.prototype[X.lowercase+"MatchesSelector"],m="undefined"!==typeof m&&m||"undefined"!==typeof jQuery&&jQuery||void 0,$={ENTER:13,ESCAPE:27,TAB:9,ALT:18,CTRL:17,SHIFT:16,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,LEFT_MOUSE:1,RIGHT_MOUSE:3,MIDDLE_MOUSE:2},z=Object.defineProperty,y={},O=0,v="__modId__",
da="_",fa=/\s*,\s*/,ea=/(,[^,]*?(?:\([^()]+\)[^,]*)?)(?=,|$)/g,C=/\(([^)]*)\)/,na="@",w={one:function(a,b){var d=function(e){e=b&&b.call(this,e);1!==e&&D(this,a,d);return e};return d},pass:function(a,b,d){return function(a){for(var c,f=d.length;f--;){c=d[f];var g="originalEvent"in a?a.originalEvent.which:a.which;if(c in $&&$[c]==g||g==c)return b.call(this,a)}return 1}},delegate:function(a,b,d){return function(a){if(!(a.target instanceof HTMLElement))return 1;for(var c=a.target;c&&c!==this;){if(Z.call(c,
d))return b.call(this,a);c=c.parentNode}return 1}},throttle:function(a,b,d){return function(e){var c=ca(this),f="_throttle"+a;if(c[f])return 1;e=b.call(this,e);if(1===e)return e;c[f]=setTimeout(function(){clearInterval(c[f]);c[f]=null},d)}},defer:function(a,b,d){return function(a){var c=this;setTimeout(function(){return b.call(c,a)},d)}}};u.prototype={setMod:function(a){var b=this.target._;if(a&&l(a,this.displayName)){a=a[this.displayName];if(k(a))this.isRefPointer&&(b=b[this.refProp],b.isInited||
b.setValue()),this.setValue(a);else if(h(a)){for(var d in a)this[d]=a[d];this.isNative||this.isInited||this.setValue()}else t(a)&&(b=b[a])&&!b.isInited&&b.setValue(),this.isInited||void 0===this.optValue?this.setValue(a):this.setValue(this.optValue);this.isNative&&("style"===this.displayName?this.target.style.cssText=this.value:this.target[this.displayName]=this.value)}else k(this.value)&&this.setValue(ja)},get:function(a){return a},set:function(a){return a},init:void 0,changed:void 0,attribute:!1,
isInited:null,isNative:!1,refProp:null,refEvt:null,value:void 0,callInit:function(a){var b=this.displayName;if(this.isInited)return this.value;this.isInited=!0;k(this.initialMod[b])?a=this.init:k(this.init)?(a=this.init.call(this.target,a),a=void 0!==a?a:this.value):void 0===a&&(a=I(this.init,!0));return a},callValueReference:function(a){k(this.value)?this.value.call(this.target,a):k(this.target[this.value])&&this.target[this.value].call(this.target,a)},unbindValue:function(){var a=this.target,b=
a._;this.isRefTarget&&this.value?(a=b[this.refPointer],D(this.value,a.refEvt,a.value)):this.isRefPointer?D(a[this.refProp],this.refEvt,this.value):(t(this.value)&&!/\s/.test(this.value)||k(this.value))&&D(a,this.displayName,this.callValueReference)},bindValue:function(){var a=this.target,b=a._;this.isRefTarget&&this.value?(a=b[this.refPointer],B(this.value,a.refEvt,a.value)):this.isRefPointer?B(a[this.refProp],this.refEvt,this.value):(t(this.value)&&l(b,this.value)&&!/\s/.test(this.value)||k(this.value))&&
B(a,this.displayName,this.callValueReference)},getValue:function(){this.isInited||this.setValue();var a=this.get.call(this.target,this.value);return void 0===a?this.value:a},setValue:function(a){var b=this.target,d=this.value,e,c;arguments.length||(a=this.optValue);if(this.isInited){if(this.isInSet){this.inSetValue=a;return}c="isSet"+a;if(!this[c]){this.isInSet=this[c]=!0;try{e=this.set.call(b,a)}catch(f){throw this.isInSet=null,this[c]=null,f;}void 0!==this.inSetValue&&(e=this.inSetValue,this.inSetValue=
void 0);this.isInSet=null;this[c]=null;if(this.value!==d)return;void 0!==e&&(a=e)}if(a===this.value)return;e=l(this,d)?d:"_";c=this[e];if(s(c)){e="isAfter"+e;if(!this[e]){this[e]=!0;var g;g=k(c.after)?c.after.call(b,a,d):c.after;if(!1===g)return;if(void 0!==g){this.setValue(g);return}if(this.value!==d)return;this[e]=null}ua(b,c)}}else if(a=this.callInit(a),c="isSet"+a,!this[c]){this[c]=!0;e=this.set.call(b,a);this[c]=null;if(this.value!==d)return;void 0!==e&&(a=e)}this.unbindValue();this.value=a;
this.bindValue();e=l(this,a)?a:"_";if(l(this,e)&&(c=this[e],s(c)&&V(b,c),e="isBefore"+e,!this[e])){this[e]=!0;c=s(c)?k(c.before)?c.before.call(b,a,d):c.before:k(c)?c.call(b,a,d):c;if(!1===c){this.setValue(d);return}if(void 0!==c){this.setValue(c);return}if(this.value!==a)return;this[e]=null}c="isChangedTo"+a;this.changed&&!this[c]&&a!==d&&(this[c]=!0,this.changed.call(b,a,d),this[c]=null);this.setAttribute()},setAttribute:function(){var a=this.target;this.attribute&&a.setAttribute&&(this.value?a.setAttribute(this.displayName,
ma(this.value)):a.removeAttribute(this.displayName),E(a,"attributeChanged"))}};var L={},aa;for(aa in u.prototype)L[aa]=!0;var pa={instances:!0,extend:!0,parent:!0,toJSON:!0,bind:!0,eachProp:!0,displayName:!0,selector:!0},R={jQuery:!0,customElement:!0,autoinit:!0,css:!0},S={created:!0,init:!0,before:!0,after:!0};n.createDefaultTarget=function(){return p&&p.createElement("div")||{}};n.registry={};n.create=function(a,b,d){function e(a,b){return sa.call(e,a,b)}if(!b||s(b))d=b,b=a,a=null;b=b||{};var c=
b.name||b.displayName;c||(c="mod-"+O++);e.displayName=c;if(d)e.parent=d;else{e.instances={};e.extend=qa;if(n.registry[c])throw Error("Mod `"+c+"` is already registered");n.registry[c]=e;b.selector||(e.selector="."+c);!m||!b.jQuery||b.jQuery in m||(m.fn[c]=function(a){return function(b){return this.each(function(d,e){var f=m(e),g=a(f[0],b);f.data(c,g)})}}(e),m[c]=e);b.css&&p&&(d=p.createElement("style"),wa.appendChild(d))}e.eachProp=oa;e.toJSON=va;W(b);for(var f in b){d=b[f];if(!("_"===f[0]&&1<f.length)&&
h(d)){W(d);for(var g in d)L[g]||s(d[g])||!h(d[g])||(d[g].displayName=f+g,d[g]=n(d[g],e))}e[f]=d}a&&e(a);if(!l(b,"autoinit")||b.autoinit)for(a=p.querySelectorAll(e.selector),b=0;b<a.length;b++)F(e(a[b]));return e};Y&&(new Y(function(a){a.forEach(function(a){if("attributes"!==a.type&&"childList"===a.type)for(var d=a.addedNodes.length,e=0;e<d;e++){var c=a.addedNodes[e];if(1===c.nodeType){l(c,v)&&F(c);for(var f in n.registry){var g=n.registry[f];Z.call(c,g.selector)&&g(c);for(var h=c.querySelectorAll(g.selector),
k=0;k<h.length;k++)F(g(h[k]))}}}})})).observe(p,{attributes:!0,childList:!0,subtree:!0,characterData:!0});(function(a,b){"function"===typeof define&&define.amd?define(b):"object"===typeof exports?module.exports=b():a.Mod=b()})(ba,function(){return n})})(this);
